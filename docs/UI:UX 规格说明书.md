# UI/UX 规格说明书：产品过程数据中心（v3，覆盖 MVP + 后续全部功能）

> 面向：UI/UX、前端、交互、可用性评估与研发团队
> 原则：清晰优先、渐进披露、一致体验、上下文为王。采用 **Tailwind + shadcn/ui + Lucide** 风格。

---

## 1. 体验目标与设计原则（保持）

* **5 次点击内**定位目标数据；随时知道“我在哪 / 这是什么 / 与谁相关”。
* 对工程师高频操作（上传 / 搜索 / 对比）进行**极简路径**设计。
* 兼容**目录树/结构浏览**与**分面导航**两种习惯，**联动同步**。
* 动效“**反馈优先**”，减少装饰；复杂信息采用**渐进式披露**。
* 术语、操作、视觉在全站**一致**，降低学习成本。

---

## 2. 信息架构（更新）

* **主导航**：
  **仪表盘**｜**数据探索器**｜**产品结构**｜**对比中心**｜**上传管理器**｜**成套性**｜**图谱**｜**设置/管理**
* **次导航**：分面区 / 对象管理面板 / 版本与基线侧栏 / 成套清单侧栏
* **面包屑**：项目空间 › 模块 › 当前位置（支持回跳）
* **分栏式布局**：左（分面/树/对象管理），右（列表/详情/视口）

---

## 3. 全局元素与状态（新增）

* **全局搜索（Cmd/Ctrl+K）**：统一搜索资产/参数/图谱节点（支持模糊与精确）。
* **状态保持**：返回列表保留滚动与筛选；视图切换保留已选对象。
* **空状态与骨架屏**：无数据时给引导示例；骨架占位缓解加载焦虑。
* **提示与错误**：分面“无结果”给放宽建议；上传失败提供重试与日志。
* **可访问性**：键盘可达、焦点可见、ARIA 标签；高对比度主题。

---

## 4. 角色与关键任务路径（新增）

* **工程师**：上传数据 → 分面/目录查找 → 详情确认 → 加入对比/成套 → 导出/分享
* **专家/总师**：仪表盘浏览 → 图谱审查 → XBOM 切换 → 版本/基线对比 → 评审结论
* **管理员**：项目空间/角色与权限 → 审计 → 词汇表与主数据映射

---

## 5. 核心屏幕（MVP + 扩展）

### 5.1 仪表盘（新增）

* **指标卡**：入库量趋势、活跃率、闭环率、基线健康度、成套性缺口排行
* **快捷区**：最近浏览/收藏、待评审基线、订阅的变更
* **交互**：卡片点击跳转对应模块并带筛选；支持日期维度切换

### 5.2 数据探索器（MVP 强化）

* **左侧**：

  * **分面筛选器**：带计数、搜索、**多选**、**区间**（数值型），可一键清空
  * **产品结构树**：与分面可互切；选中节点同步影响分面计数与列表
* **右侧**：

  * 视图切换（表格/卡片）、多选、**加入对比**、**加入成套**、导出
  * 列表行/卡片：类型徽标、版本号、更新时间、参数摘要、协同指示（未读评论）

### 5.3 资产详情（MVP 强化）

* **标题区**：面包屑 / 类型 / 版本 / 状态（草稿/已发布/检出中）/ 收藏 / 分享
* **预览区**：通用预览（PDF/图像/视频/文本）与高级预览（见 5.11）
* **信息区**：参数与元数据、**关联摘要**（上/下游计数与关键项）
* **操作栏**：下载 / 检入 / 检出 / 修订 / 发布 / 加入对比 / 加入成套
* **版本侧栏**：时间轴（备注/提交人/时间）、两版差异快速预览、**基线标识**
* **悬停预览卡片**：关联项/结构树/图谱节点**悬停即显**核心要点

### 5.4 上传管理器（MVP）

* 拖拽/选择文件；继承当前项目空间；元数据模板与**必填校验**
* 批量导入（模板下载/填表导入）；上传队列、失败重试、错误报告

### 5.5 产品结构浏览器 + XBOM（P2）

* **BOM 选择器**：设计 / 工艺 / 试验件（可扩展）
* **树视图**：选中节点同步更新分面与列表；显示节点角色/数量
* **XBOM 差异模式**：跨视图**增删差异高亮**，支持跳转定位
* **无映射提示**：解释原因与**替代定位**（最相近/上层装配）

### 5.6 对比中心（P2）

* **对象管理面板**：已选对象、类型分组、顺序调整、移除、一键清空
* **主视口（按类型自动匹配）**：

  * **曲线/时序**：联动缩放、**对齐基准（时间零点/事件）**、**归一化/平滑**、差异统计
  * **3D/CAD**：多视口联动、**半透叠加/闪烁对照**、着色方案切换、测量/剖切
  * **文档/图像**：并排对照、内容差异高亮（文本 diff/图像遮罩）
  * **参数表**：按参数维度行对齐、差异着色、排序筛选、**导出差异摘要**

### 5.7 上下文关系图谱（P2）

* **入口**：资产详情页“查看关系图谱”
* **视图**：中心节点 + 一层邻接，支持**按需展开**上/下游
* **工具**：节点搜索与筛选（需求/设计/仿真/试验/BOM）、**断链高亮**、右侧信息卡片、跳转相邻资产
* **布局性能**：≤500 节点保持流畅；>500 分层加载、聚类折叠

### 5.8 版本与基线（P2）

* **版本历史**：时间轴、备注、提交人与原因；任意两版**差异比较**（参数/文档/曲线/3D）
* **基线**：列表（里程碑）、包含对象与版本；**基线对比**与**基线报告导出**

### 5.9 成套性管理（P2）

* **清单定义**：任务书/方案模板（必交/可选）；支持继承与版本化
* **完整性**：进度条与**缺口列表**；一键创建占位与责任人分派
* **交付**：**一键打包导出**（含元数据/签名/校验清单）

### 5.10 分享与协同（P2）

* **分享**：有效期 / 水印 / 只读 / 外链授权 / 访问审计
* **协同**：评论区、@提及、已读回执、订阅变更与通知偏好（站内+邮件）

### 5.11 高级预览（领域）（P2）

* **3D/CAD**：装配层级树、旋转/缩放、**剖切/测量**、爆炸图
* **CAE 云图**：标量场/等值线、探针/截面、帧控制、单位切换
* **试验曲线**：多通道叠加、统计（峰值/积分/RMS）、异常点标注与导出

### 5.12 自动采集代理（P3）

* **客户端采集器**：路径规则、文件指纹、去重、离线缓存、失败重传、隐私过滤
* **服务端采集**：仿真/试验平台通过 **API/消息**回传（含元数据模板）

### 5.13 管理与治理（P3）

* **角色与权限**、词汇表/主数据映射、质量规则（缺参/异常/重复）、审计报表
* **策略**：最小权限、项目空间隔离、关键操作二次确认与审批流

---

## 6. 组件库（更新）

* **FacetSelector**（计数/搜索/多选/区间、联动清空）
* **AssetCard / ListRow**（类型徽标/版本/更新时间/参数摘要/协同状态）
* **ContextPanel & HoverCard**（关联摘要、**悬停预览**）
* **CompareViewport**（曲线/3D/文档/参数表子组件与工具条）
* **XBOMTree**（视图切换/差异高亮/替代定位）
* **GraphCanvas**（节点/边、筛选、断链标注、渐进加载）
* **VersionTimeline / BaselineBadge / BaselineDiff**
* **CompletenessPanel**（清单/缺口/进度/分派/打包）
* **ShareDialog / CommentThread / MentionList**
* **Uploader**（批量/模板/断点/错误报告）

> 每个组件需提供：**属性接口**、空/加载/错误状态、**性能基准**与**可访问性**说明。

---

## 7. 关键交互流程（新增示意）

* **上传流程**：选择项目空间 → 拖拽文件 → 套用模板 → 校验 → 上传 → 结果反馈
* **XBOM 切换**：DBOM 选中节点 → 切换 PBOM → 自动定位映射 → 差异高亮 → 无映射提示
* **版本对比**：详情页打开版本侧栏 → 选取两版 → 在对应视口展示差异 → 导出报告
* **对比中心**：列表多选 → 加入对比 → 自动匹配视图 → 选择对齐/归一化 → 导出差异
* **图谱审查**：详情页 → 打开图谱 → 展开上/下游 → 悬停卡片 → 跳转相邻资产

> 可在设计稿中补充 Mermaid/流程图；开发按上述步骤编写 E2E 用例验证。

---

## 8. 视觉与可用性规范（保持 + 细化）

* **调色**：主色 `#0A3D62`、辅色 `#606C7A`；语义色按 shadcn/ui 默认；**高对比主题**可切换
* **字体**：Inter / 思源黑体；字号/间距遵循 **4pt 网格**
* **触达**：主要按钮 ≥ 44×28 px；可点击区域明确；**聚焦环**明显
* **层级**：卡片化模块、细腻阴影、模块化留白；信息密度按角色可调
* **动效**：进入/切换 < 200ms；长任务显示进度并可取消/后台执行

---

## 9. 性能与指标（新增）

* **预算**：LCP ≤ 2.5s；交互响应 ≤ 100ms；对比视口 ≥ 30 FPS；图谱 ≤ 500 节点流畅
* **渐进加载**：列表分页/虚拟滚动；图谱分层与聚类；大文件预览分块
* **埋点**：搜索转化、对比使用、图谱展开深度、XBOM 切换频次、分享/下载、评论互动
* **容错**：离线提示与重连；失败重试与退避；关键操作幂等

---

## 10. 无障碍与国际化（新增）

* **WCAG 2.1 AA**；语义标签与阅读顺序；可达性测试清单
* **键盘快捷键**：全局搜索、切换视图、面包屑返回、对比操作等
* **文案多语言占位**：中/英；数字/单位/日期格式本地化（工程单位可切换）

---

## 11. 交付与验收（新增）

* **交付物**：Figma 高保真、组件规范文档、交互说明、无障碍清单、用例脚本
* **验收**：按 PRD 用户故事与 AC、NFR 指标逐项测试；可用性走查 + 无障碍审计
* **回归**：关键路径自动化（上传 / 搜索 / 对比 / 图谱 / XBOM / 成套性 / 版本基线）

---

**附注**：本 v3 规格在原先仅覆盖 MVP 的基础上，已完整补充 **Phase 2/3** 的 UI/UX 说明：

* **对比中心**（多方案/多工况/跨领域，对齐基准、归一化/平滑、3D 半透/闪烁、参数差异导出）
* **XBOM 切换与差异模式**（自动映射、增删高亮、无映射提示与替代定位）
* **上下文关系图谱**（按需展开、断链高亮、悬停卡片、节点筛选与搜索）
* **版本与基线**（两版差异、基线列表/对比/报告）
* **成套性管理**（清单模板、缺口指派、一键打包）
* **高级预览**（3D/CAD、CAE 云图、试验曲线）
* **自动采集代理与治理**（路径规则、去重、质量规则、审计）

如需，我可以把这份规格直接**转成可评审版 PDF**或补一版**组件属性接口表**（基于 React + shadcn/ui）以便前端落地。
