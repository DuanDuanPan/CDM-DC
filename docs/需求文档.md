
# 产品需求文档（PRD）：产品过程数据中心（v2）

> 面向：产品/架构/研发/测试/实施团队  
> 宗旨：在保持 MVP 聚焦的同时，补齐 Phase 2/3 的关键需求与验收标准，并解决三份文档之间的范围/术语不一致。

---
## 1. 目标与背景（保持）
- 效率：将故障分析数据准备从**数周**缩至**数小时**；
- 资产：管理≥80% 过程数据，形成**100% 可追溯**；
- 闭环：赋能仿真—试验闭环与数字孪生。

---
## 2. 术语与范围一致性（新增）
- **项目空间**：权限与隔离单元（UI 中统一称“项目空间”）；
- **XBOM**：多视图结构（设计/工艺/试验件等）；
- **对比中心**：多方案/多工况/跨领域对比统一入口；
- **上下文图谱**：需求—设计—仿真—试验链路的可视化视图；
- **成套性**：某任务/方案所需交付物集合的完整性状态。

---
## 3. 功能性需求（FR）— 汇总与扩展
> 标记：**MVP**、**P2**（Phase 2）、**P3**（Phase 3）

**FR1（MVP） 数据汇集（手动）**：Web 上传并录入元数据/关键参数。  
**FR2（MVP） 分面导航**：项目/结构/领域/类型等分面组合筛选，计数提示。  
**FR3（MVP） 上下文展示（基础）**：资产详情展示元数据与上下文摘要。  
**FR4（MVP） 参数级数据模型**：关键技术参数可检索/比对。  
**FR5（P2） 全链路追溯**：跨需求—设计—仿真—试验可视化（见 FR28 图谱）。  
**FR6（P2） 多版本管理**：版本历史、差异比较、回退。  
**FR7（P2） XBOM 多视图**：DBOM/PBOM/试验件 BOM 切换与差异提示。  
**FR8（P2） 关系与配套性查看**：图谱/列表两种方式。  
**FR9（P2） 数据成套性管理**：定义清单、完整性校验、缺口提示。  
**FR10（P2） 专业 PLM 操作**：检入/检出、修订、发布（与 TC 同步）。  
**FR11（P2） 基线管理**：评审冻结、基线对比、基线报告导出。  
**FR12（MVP） 全文检索**：通用文档内容检索；结果高亮。  
**FR13（MVP） 服务端 API**：资产与元数据 CRUD、检索、查询。  
**FR14（P2） 受控分享**：跨项目授权、有效期/水印/只读链接。  
**FR15（MVP） 回收站**：可恢复/二次确认永久删除。  
**FR16（P2） 团队协同**：评论、@提及、通知、变更订阅。  
**FR17（MVP） 批量处理**：批量导入/导出/元数据编辑。  
**FR18（MVP） 通用预览**：PDF/图片/视频/文本。  
**FR19（MVP） 数据下载**：权限范围内可下载。  
**FR20（MVP） 访问控制**：项目空间级别 RBAC；最小权限。  
**FR21（MVP） 结构化组织**：项目空间 + 文件夹树（与分面并行）。

**FR22（P2） 对比中心**：  
- 支持**多方案/多工况/跨领域**对比；  
- 曲线对齐（时间零点/事件）、归一化、平滑；  
- 3D 半透叠加/闪烁对照；  
- 文本/参数差异表；  
- 对比结果可导出。

**FR23（P3） 自动采集代理**：  
- 本地采集器（监控路径/规则归集/元数据模板）；  
- 服务器侧采集（仿真/试验平台回传）；  
- 断点续传与离线缓存。

**FR24（P2） 高级预览（领域）**：3D/CAD 预览、CAE 云图、试验曲线交互。  
**FR25（P2） 参数分析**：趋势/分布/散点与回归；版本与方案维度切片。  
**FR26（P2） 审计与留痕**：全操作日志、下载/分享审计、可追责。  
**FR27（P2） 成套性交付**：一键打包导出（含元数据/签名）。  
**FR28（P2） 上下文关系图谱**：节点（需求/设计/仿真/试验/BOM）与边；断链识别。  
**FR29（P2） XBOM 差异模式**：跨视图增删差异高亮、快速定位映射。  
**FR30（P3） 数据治理**：主数据绑定/词汇表/质量规则（缺参、异常值、重复）。  
**FR31（P3） 指标与报表**：采纳率、入库率、闭环率、评审基线健康度。

---
## 4. 非功能需求（NFR）— 扩展
- **性能**：百万级对象分面筛选 <1s；大文件上传 10GB+；对比视图渲染 3–4 个大型对象保持流畅（>30 FPS 交互）。  
- **安全**：零信任、最小权限、全链路加密、行/列级审计、可水印分享。  
- **可靠性**：对象存储多副本；任务可重试；日志可追溯 36 个月。  
- **可用性**：WCAG 2.1 AA；键盘可达；高对比度模式。  
- **可维护性**：日志结构化、指标可观测（OpenTelemetry）；灰度与回滚。

---
## 5. 设计约束与集成假设（更新）
- 与 Teamcenter 双向集成（接口/导入导出/适配层兜底）；  
- 与仿真平台（结果与参数）、试验台架（时序/元数据）打通；  
- 采用 Monorepo/TypeScript；ES 支撑检索。

---
## 6. 用户故事与验收标准（节选，新增）
**US-22 对比中心（工程师）**  
- *Given* 我在数据探索器中多选对象，*When* 点击“加入对比”，*Then* 进入对比中心，默认按对象类型自动选择合理视图（曲线/3D/文档/参数表）。  
- **验收**：可切换对齐基准；可导出差异摘要；≥3 对象时仍能流畅操作。

**US-28 上下文关系图谱（专家/管理者）**  
- *Given* 我在资产详情页，*When* 点击“关系图谱”，*Then* 展示以当前资产为中心的一层关联，可按需展开上/下游。  
- **验收**：支持节点搜索与悬停卡片；断链节点高亮；可筛选节点类型。

**US-29 XBOM 差异模式（工艺/试制）**  
- *Given* 我在 DBOM 选中一个部件，*When* 切到 PBOM/试验件 BOM，*Then* 自动定位对应节点并高亮增删差异。  
- **验收**：无法映射时给出原因提示与替代定位。

…（其余 US/AC 详见附录 A 表）

---
## 7. 追溯矩阵（新增，摘录）
| PRD 功能 | UI/UX 章节 | 接口/数据 | 测试要点 |
|---|---|---|---|
| FR22 对比中心 | §7.6 | /api/compare | 多对象/多类型/性能 |
| FR28 关系图谱 | §7.7 | /api/graph | 断链识别/布局性能 |
| FR29 XBOM 差异 | §7.5 | /api/xbom | 映射规则/高亮正确性 |

---
## 8. 风险与开放问题（更新）
- CAE/3D 预览组件的适配范围与版权；  
- 试验台架数据标准化与去标识化；  
- TC/过程平台接口变更的影响。

---
## 9. 附录（新增）
- **附录 A**：完整用户故事与验收标准清单；  
- **附录 B**：数据模型草图与元数据字段表；  
- **附录 C**：接口清单（REST/事件）。

