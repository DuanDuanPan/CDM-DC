# Project Brief: 产品过程数据中心

> 草案版本：0.1（2025-10-14）

## Introduction

本简报用于指导“产品过程数据中心（试验领域）”的立项与MVP落地，明确范围、目标与度量，并作为后续PRD/架构输入的上游文档。

- 工作模式：交互式协同起草（本次选择）
- 输出位置：`docs/brief.md`
- 输入材料：
  - 头脑风暴纪要（`docs/brainstorming-session-results.md`）
  - 你提供的其他补充输入（将按后续章节逐步纳入）
- 能力边界：聚焦“数据中心”的汇聚/标准化/洞察/服务；不包含TDM/现场试验执行与流程控制。
- 近期关注：三大MVP方向（需求验证矩阵；设计×仿真×试验协同看板与模型校准；试验知识图谱）。

（如需更换输出路径或追加背景资料，可在任一章节的征询阶段提出。）

## 项目简介

项目“产品过程数据中心”是面向复杂装备研制的前端原型，当前聚焦“试验领域”的数据汇聚、标准化与洞察展示，提供跨设计/仿真/试验的可视化与分析能力。代码实现为 Next.js App Router 的模块化单页应用，内置多种查看器与对比工具，便于快速验证业务流与交互模式。

### 项目定位
- 服务对象：型号总师、项目经理、设计/仿真/试验/质量等多角色协同。
- 目标价值：打通设计—仿真—试验“连续验证”的证据链，提升需求验证透明度与资料成套性，支撑基线变更与对外交付。
- 能力边界：本项目为数据中心前端原型，聚焦“汇聚/标准化/洞察/服务”；不包含 TDM/现场试验控制与流程执行。

### 关键模块（代码对应）
- 仪表盘 Dashboard（components/dashboard/*）：项目健康、KPI 与近期活动总览。
- 数据探索器 Data Explorer（components/explorer/*）：分面筛选、标签体系与资产列表（示例数据）。
- 产品结构 XBOM/EBOM（components/structure/ebom/*）：EBOM 基线与结构树、摘要卡片、影响分析与评审面板。
- 对比中心 Compare（components/compare/*）：方案/工况/试验-仿真/设计-需求/EBOM 基线差异对比，支持 CSV/PNG 导出。
- 仿真与三维预览（components/structure/preview/*, simulation/*）：
  - PDF 与图片查看（components/common/PdfViewer*.tsx, ImageViewer.tsx）；
  - 在线 3D 查看（online-3d-viewer，occt-import-js，rhino3dm，web-ifc）；
  - VTK 网格预览（vtk.js）。
- 成套性管理（components/completion/*）：按模板统计设计/仿真/试验资料完成度。
- 关系图谱（components/graph/RelationGraph.tsx）：组件关系与状态可视化（示例）。
- 上传管理器/设置（components/upload/*, components/settings/*）：原型级文件队列与配置界面。

### 使用场景示例
- 方案/基线变更评审：在对比中心核对 EBOM 差异、参数/曲线/文档差异并导出证据。
- 需求验证透明化：在结构/对比视图中查看“设计/需求”对齐情况与缺口（示例数据）。
- 资料成套性达标：按模板统计资料完成度，提示缺失项与责任人。

### 数据与集成现状
- 当前为前端原型，使用内置示例/Mock 数据（如 components/structure/ebom/data.ts, simulation/data.ts）。
- 3D 依赖资源通过 `scripts/sync-online3dviewer-assets.js` 同步至 `public/3dviewer`。
- 尚未对接后端域服务（ALM/PLM/试验数据源）；接口与真源将按“项目纪要 附录B”中的 MVP 标准推进。

### 技术栈与配置
- 前端框架：Next.js 15（App Router）、React 19、TypeScript、TailwindCSS。
- 可视化与查看器：recharts、pdfjs-dist、online-3d-viewer、vtk.js、rhino3dm、occt-import-js、web-ifc。
- 构建与脚本：见 `package.json` 与 `next.config.ts`，3D 资源拉取脚本位于 `scripts/`。

## Executive Summary（执行摘要）

本项目是“产品过程数据中心”的一个关键子域原型，当前聚焦“试验领域”。目标是在不改动线下TDM/试验执行系统的前提下，以数据中心方式提供跨设计/仿真/试验的连续验证证据链与决策支持：

- 以统一语义与主数据连接设计配置、仿真结果与试验结果，提升验证透明度与可追溯性；
- 通过对比中心与查看器，支撑方案、工况、试验-仿真、设计-需求及 EBOM 基线差异分析；
- 以“需求验证矩阵（MVP1）”“协同看板与模型校准自动化（MVP2）”“试验知识图谱（MVP3）”为起点，建立可迭代的价值闭环；
- 保持与上游 ALM/PLM、仿真平台、试验结果源系统的解耦，以标准接口集成为主，确保扩展性与合规性。

外延（后续阶段）：将试验域能力与其他产品过程域（如需求、设计、制造、质量）联通，形成端到端的“产品过程数据中心”。

## Goals & Success Metrics（目标与度量）

### Business Objectives（业务目标）
- 在不改动线下TDM的前提下，建立跨设计/仿真/试验的“连续验证”证据链，缩短评审准备时间与异常定位时间；
- 打造面向总师/PM/设计/仿真/试验/质量的统一洞察入口，提高跨角色协同效率；
- 以三大 MVP 为抓手，于第12周交付可演示、可验收的原型闭环（含对外评审材料）；
- 为对接 ALM/PLM/试验结果源系统提供稳定的数据/接口契约与真源判定标准。

### User Success Metrics（用户成功度量）
- 评审准备时间：EBOM/方案差异与关键资料聚合后，评审准备时间下降；
- 需求透明度：需求→用例→结果的链路可见、可追溯，缺口自动标注；
- 协同效率：设计/仿真/试验在异常场景下的联动与回写更顺畅；
- 学习与复用：相似案例与知识图谱可检索、可复用，缩短新人熟化时间。

### KPIs（关键绩效指标）
- 需求闭环周期缩短 ≥ 30%（以历史基线为对照）；
- 矩阵状态一致率 ≥ 99%（与源系统同步差异率 ≤ 1%）；
- 事件→矩阵刷新时延 ≤ 5 分钟，端到端可靠性 ≥ 99.9%；
- 模型校准周期缩短 ≥ 30%，异常定位平均用时下降 ≥ 40%；
- 指标口径一致率 ≥ 98%，手工拼表时间下降 ≥ 80%；
- Top场景追踪链路覆盖率 ≥ 95%，知识包检索命中率（Top-K）≥ 80%，P95 检索延迟 ≤ 1.5s。

### Measurement Plan（度量与基线计划）
- 基线采集：第1–2周锁定 Top 场景与代表性项目，采集历史指标基线（评审准备时长、异常定位用时、需求闭环周期等）。
- 数据来源：
  - ALM/PLM（需求、配置、更改单/版本）；
  - 仿真平台（模型版本、结果、预测）；
  - 试验结果源系统（工况、用例、结果、时间戳）；
  - 前端/看板日志（订阅触达、钻取深度、检索延迟）。
- 统计口径：
  - “一致率”＝1－（不一致条目数/总条目数）；
  - “刷新时延”取事件→可见状态更新的 P95；
  - “命中率Top‑K”按带标注的验证集计算，K=10；
  - “闭环周期”按需求状态从“发现缺口”到“已验证通过”的时长。
- 采样范围：先行两条试验线的 Top N 需求与关键用例，逐步扩圈。

### Ownership & Cadence（负责人与节奏）
- 指标口径/语义注册表：数据治理负责人（周报、变更评审）；
- 需求矩阵与一致性：系统工程/需求负责人（月度复盘）；
- 协同看板与校准任务：仿真负责人（双周）；
- 订阅触达与可观测性：平台负责人（周）；
- 知识图谱质量与检索：知识/培训负责人（月）。

### MVP Acceptance Gates（MVP 验收门槛）
- MVP1 需求验证矩阵：
  - 覆盖 Top 场景链路 ≥ 95%；状态一致率 ≥ 99%；刷新 P95 ≤ 5 分钟；
  - 具备订阅推送与钻取溯源能力；
  - 明确真源（需求/用例/结果）与冲突处理策略。
- MVP2 协同看板与模型校准：
  - 偏差阈值触发→校准任务创建 ≤ 10 分钟；
  - 异常定位平均用时下降 ≥ 40%；
  - 回写模型置信度与关联设计参数，链路可审计。
- MVP3 试验知识图谱：
  - Top‑K 命中 ≥ 80%，P95 检索 ≤ 1.5s；
  - 能从案例一键生成培训包（案例+处置+注意事项）；
  - 季度复发率下降 ≥ 25%。

### Assumptions & Non‑Goals（假设与非目标）
- 假设：上游系统可提供事件/接口最小集；先行域具备可用数据；密级隔离按联邦/特征缓存策略落地。
- 非目标：不承接 TDM/现场试验执行控制；不在本阶段构建全量数据仓或跨域统一权限体系。
